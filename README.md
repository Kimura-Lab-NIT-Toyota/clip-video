# clip-video

## Overview
動画データを切り取るPythonプログラム。  
動画の始終フレームをアノテーションする`clip_annotation.py`と、  
アノテーションを元に動画を切り取る`clip.py`から構成されています。  

## Requirements
- Python3
  - opencv-python
  - ffmpeg-python
  - natsort
- ffmpeg
- GUI表示可能な環境

## Usage
1. `paths.txt`に、アノテーション対象の動画パスを改行区切りで列挙
    - [paths_example.txt](/paths_example.txt)に記述例
    - 絶対パス相対パスどちらも可能
    - 空行は入れないこと
    - `*/<動画の分類名>/<動画名>`のように記述すること
      - *は任意のディレクトリ構成
      - 出力時のディレクトリ構成に使用
2. [annotate.py](/annotate.py)を実行し、アノテーションを行う
    - `paths.txt`から動画を読み込む
    - 操作法
      - qキーで動画の始フレームをアノテーション
      - eキーで動画の終フレームをアノテーション
      - dキーで動画を1フレーム進める
      - aキーで動画を1フレーム戻す
      - cキーで次の動画に移動
      - zキーで前の動画に移動
      - Escキーで終了
    - 画面に表示されているフレームがアノテーションされたフレームの間であれば、"CORE"が表示されます
3. [clip.py](/clip.py)で、アノテーション情報を元に動画をクリップ
    - クリップされた動画は`clipped_videos`ディレクトリに配置
    - アノテーション情報が不正な値である場合や、出力先に同名ファイルがある場合には処理を飛ばす

ファイル名やキー設定などは`config.json`から変更できます。

